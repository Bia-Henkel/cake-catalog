(window.odspNextWebpackJsonp=window.odspNextWebpackJsonp||[]).push([[313],{1630:function(e,t,n){"use strict";n.r(t),n.d(t,"ItemInvalidator",function(){return D}),n.d(t,"resourceKey",function(){return I});var a=n(128),i=n(363),r=n(851),o=n(19),s=n(143),c=n(627),d=n(2364),l=n(9),u=n(47),f=n(1466),p=n(10),m=n(35),_=n(342),h=n(16),b=n(12),g=n(238),v=n(126),y=n(5),S=n(173),D=function(){function e(e,t){void 0===e&&(e={});var n=t.itemCacheStore;this._itemCacheStore=n,this._itemsScopeCurrentItemKey=t.itemsScopeCurrentItemKey}return e.prototype.invalidateItemSet=function(e){var t;this._itemCacheStore.dispatch(Object(c.e)({items:(t={},t[e]=[o.e],t)}))},e.prototype.invalidateCurrentItemSet=function(){var e=this._itemsScopeCurrentItemKey.peek(),t=this._itemCacheStore.dispatch(Object(s.e)(function(t){return Object(r.e)(t,{itemKey:e})}));t&&this.invalidateItemSet(t)},e.prototype.invalidateItems=function(e){var t=this._getItemKeyFromKOKey(e);this._invalidateFolderItems(t)},e.prototype.invalidateQuota=function(e){var t,n=this._getItemKeyFromKOKey(e),a=Object(y.Hr)(y.Bi)?Object(S.e)():this._getQuotaKeyFromKOKey(n);a&&this._itemCacheStore.dispatch(Object(c.e)({items:(t={},t[a]=[v.t],t)}))},e.prototype.refreshItemsInCurrentItemSet=function(e){},e.prototype.invalidateGroups=function(e){},e.prototype.invalidateCurrentFolderItems=function(){var e=this._itemsScopeCurrentItemKey.peek(),t=this._itemCacheStore.dispatch(Object(s.e)(function(t){return t.demandItemFacet(o.r,e)}));t&&t.itemKey&&this._invalidateFolderItems(t.itemKey)},e.prototype.resetDefaultDriveItemSetForKey=function(e){var t,n=this._getItemKeyFromKOKey(e);if(l.e.matches(n)){var a=l.e.deserialize(n),i=u.e.serialize({driveItemKey:a,sortBy:"",isAscending:!0});this._itemCacheStore.dispatch(Object(f.e)({items:(t={},t[i]=!0,t)}))}},e.prototype._invalidateFolderItems=function(e){var t;this._itemCacheStore.dispatch(Object(c.e)({items:(t={},t[e]=[o.t],t)}))},e.prototype._getItemKeyFromKOKey=function(e){var t=Object(p.y)(e);if(!b.e.isActivated("436013B1-D7B2-4104-9737-56C2DCD15958","10/21/2021","Enablce Cid DriveId convert"))return this._itemCacheStore.dispatch(Object(s.e)(function(e){var n=e.demandItemFacet(_.e,h.a);return _.e.evaluate(n)(e,{viewParams:t})})).itemKey;var n=t.id,a=t.cid,i=Object(m.l)({apiVersion:"v1.0",driveId:a});return l.e.serialize({endpoint:i,driveId:a,itemId:n})},e.prototype._getQuotaKeyFromKOKey=function(e){if(l.e.matches(e)){var t=l.e.deserialize(e),n={endpoint:t.endpoint,driveId:t.driveId};return g.e.serialize(n)}},e.dependencies={itemCacheStore:i.e,itemsScopeCurrentItemKey:d.e},e}(),I=Object(a.r)("ItemInvalidator",D)},2364:function(e,t,n){"use strict";n.d(t,"e",function(){return c});var a=n(8),i=n(25),r=n(1104),o=n(342),s=n(16),c=new a.t({name:"ItemsScopeCurrentItemKey.key",factory:{dependencies:{viewParamsObservable:i.T,itemCacheObservablesFactory:r.e},create:function(e){var t=e.viewParamsObservable,n=e.itemCacheObservablesFactory.pureCompute(function(e){var n=e.demandItemFacet(o.e,s.a);return o.e.evaluate(n)(e,{viewParams:t(),isNavigation:!0}).itemKey});return{instance:n,disposable:n}}}})}}]);